<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Add a fileðŸ“¥</title>
      <link rel="stylesheet" href="../style.css">
      <script defer src="Add.js"></script>
      <script defer src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js" integrity="sha256-/H4YS+7aYb9kJ5OKhFYPUjSJdrtV6AeyJOtTkw6X72o=" crossorigin="anonymous"></script>
   </head>

   <script>

      //seperate navbar
      fetch("/navbar.html")
      .then(response => response.text())
      .then(data => document.getElementById("navbar").innerHTML = data);
      
      // master function for copying textbox and alerts
      function copyText(i) {   // Function to copy the text from the textarea
      var textarea = document.querySelectorAll(`#page${i}show1`)
      textarea[0].select();   // Select the text in the textarea
      document.execCommand("copy");   // Copy the text to the clipboard
      
      if(i === 1){
         alert("Base64 copied to clipboard!");   // Alert the user that the text has been copied
      }
      else if(i === 2){
         alert("CypherText copied to clipboard!");
      }
      else if(i === 3){
         alert("CID copied to clipboard!");
      }
      else{
         console.err(error,"error in master js function");
      }
   }
   </script>


   <body>
      <!--Navbar-->
      <div id="navbar"></div>

      <!--File selection button-->  
      <div class="container">
         <div class="tab-status">
            <span class="tab active">1</span>
            <span class="tab">2</span>
            <span class="tab">3</span>
         </div>
         <form action="#">
            <div role="tab-list">
               <div role="tabpanel" id="Step1" class="tabpanel">
                  <h1>Step 1</h1>
                  <h3 id="h3" >Select a file</h3>
                  <input type="file" class="form-input" id="page1data1">
                  <br><br>
               <div class="copy-container">
                  <textarea cols="120" style="max-width: 100%; resize: none;" id="page1show1"></textarea>
                  <br> <i onclick="copyText(1)" id="page1show1" class="copy-icon">ðŸ“‹</i>
               </div>

               </div>
               <div role="tabpanel" id="Step2" class="tabpanel hidden">
                  <h1>Step 2</h1>
                  <h3>Enter your key</h3>
                  <input type="text" class="form-input" id="page2data1" placeholder="key?"> <br><br> <button id="page2SubmitKey" type="submit">submit</button><br>
                  <div class="copy-container">
                     <textarea cols="120" style="max-width: 100%; resize: none;" id="page2show1"></textarea>
                     <br> <i onclick="copyText(2)" id="page2show1" class="copy-icon">ðŸ“‹</i>
                  </div>
               </div>
               <div role="tabpanel" id="Step3" class="tabpanel hidden">
                  <h1>Step 3</h1>
                  <h3>Upload file to <img width="7%" height="7%" src="https://upload.wikimedia.org/wikipedia/commons/1/18/Ipfs-logo-1024-ice-text.png"/></h3>
                  <h5 style="font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;">Slide to upload âž¡</h5>
                  <div class="confirmation-slider">
                     <div id="status">
                        <input id="confirm" type="range" value="0" min="0" max="100" />
                        <span class="notice">UploadingðŸš€</span>
                     </div>
                  </div>
                     <div id="page3show2"></div>
                     <div class="copy-container">
                        <textarea cols="120" style="max-width: 100%; resize: none;" id="page3show1"></textarea>
                        <br> <i onclick="copyText(3)" id="page3show1" class="copy-icon">ðŸ“‹</i>
                     </div>
                     <button class="btnRight" id="homebutton" >Home</button>
               </div>
            </div>
            <div class="pagination">
               <a class="btn hidden" id="prev">Previous</a>
               <a class="btn" id="next">Next</a>
               <button class="btn btn-submit hidden" id="submit">Home</button>
            </div>
         </form>
      </div>
   </body>
   <script>//auth check
      if(localStorage.Username == undefined) {
            console.log("not logged in")
            let statusDiv=document.querySelector('.container');
            statusDiv.className="null";//no class
            statusDiv.innerHTML = '<div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); font-family:verdana; font-weight:bold; font-size:25px; color: #57f309; border: #f34709; background-color: #e94f55; padding: 20px;"><p>You need to be Logged in.</p><button  onclick=login()>Login</button></div>';
        }
        function login(){
         window.location.replace("../auth/auth.html");
        }
      </script>
</html>
